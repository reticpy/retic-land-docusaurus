(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{77:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return c})),t.d(a,"metadata",(function(){return o})),t.d(a,"rightToc",(function(){return p})),t.d(a,"default",(function(){return s}));var n=t(2),r=t(6),l=(t(0),t(89)),c={id:"request",title:"Request",sidebar_label:"Request",description:"Request",slug:"/api/request"},o={unversionedId:"api/request",id:"api/request",isDocsHomePage:!1,title:"Request",description:"Request",source:"@site/docs\\es\\api\\request.md",slug:"/api/request",permalink:"/manual/api/request",editUrl:"https://github.com/reticpy/retic-land-docusaurus/edit/master/docs/api/request.md",version:"current",sidebar_label:"Request",sidebar:"docs",previous:{title:"Archivo principal",permalink:"/manual/concepts/app"},next:{title:"Response",permalink:"/manual/api/response"}},p=[{value:"Clase Request",id:"clase-request",children:[{value:"Propiedades",id:"propiedades",children:[]},{value:"Funciones",id:"funciones",children:[]},{value:"Otras propiedades y funciones",id:"otras-propiedades-y-funciones",children:[]}]}],i={rightToc:p};function s(e){var a=e.components,t=Object(r.a)(e,["components"]);return Object(l.b)("wrapper",Object(n.a)({},i,t,{components:a,mdxType:"MDXLayout"}),Object(l.b)("h2",{id:"clase-request"},"Clase Request"),Object(l.b)("p",null,"La clase ",Object(l.b)("strong",{parentName:"p"},"Request")," representa la solicitud HTTP y tiene propiedades como par\xe1metros, cuerpo de la solicitud, encabezados de la petici\xf3n, etc."),Object(l.b)("h3",{id:"propiedades"},"Propiedades"),Object(l.b)("p",null,"Algunas propiedades son una implementaci\xf3n de ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"https://werkzeug.palletsprojects.com/en/1.0.x/datastructures/#werkzeug.datastructures.ImmutableMultiDict"}),"ImmutableMultiDict")," e ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"https://werkzeug.palletsprojects.com/en/1.0.x/datastructures/#werkzeug.datastructures.ImmutableList"}),"ImmutableList")," para representar su valor."),Object(l.b)("h4",{id:"access_route"},"access_route"),Object(l.b)("p",null,"Lista todas las direcciones IP que intervienen en la petici\xf3n."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# Valor actual de access_route\nreq.access_route: ImmutableList(['127.0.0.1'])\n\n")),Object(l.b)("h4",{id:"args"},"args"),Object(l.b)("p",null,"Lista todos los parametros en la URL de la petici\xf3n."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# URL de la petici\xf3n HTTP\n# GET http://localhost:1801/files/123?queryparam=13344\n\n# Valor actual de args\nreq.args: ImmutableMultiDict([('queryparam', '13344')])\n\n")),Object(l.b)("p",null,"Por defecto un ",Object(l.b)("inlineCode",{parentName:"p"},"ImmutableMultiDict")," es retornado en esta funci\xf3n, contiene funciones como ",Object(l.b)("inlineCode",{parentName:"p"},"getlist"),", ",Object(l.b)("inlineCode",{parentName:"p"},"get"),", ",Object(l.b)("inlineCode",{parentName:"p"},"get_all")," para interactuar de los p\xe1rametros en la URL de una petici\xf3n. Para m\xe1s detalles visita la documentaci\xf3n oficial sobre la clase ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"https://werkzeug.palletsprojects.com/en/1.0.x/datastructures/#werkzeug.datastructures.ImmutableList"}),"ImmutableMultiDict"),"."),Object(l.b)("h4",{id:"base_url"},"base_url"),Object(l.b)("p",null,"URL de la petici\xf3n sin paramertros ",Object(l.b)("em",{parentName:"p"},"querystring"),"."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# Valor actual de base_url\nreq.base_url: 'http://127.0.0.1:1801/files/123'\n\n")),Object(l.b)("h4",{id:"body"},"body"),Object(l.b)("p",null,"Instancia de la clase ",Object(l.b)("inlineCode",{parentName:"p"},"Body"),". Contiene el cuerpo de la petici\xf3n."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# Valor actual de body\nreq.body:\n    type: 'form'\n    body: ImmutableMultiDict([('filename', 'fullname')])\n\n")),Object(l.b)("h4",{id:"cookies"},"cookies"),Object(l.b)("p",null,"Lista todas las cookies de la petici\xf3n."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# Valor actual de cookies\nreq.cookies: ImmutableMultiDict([('cookie1', '123456')])\n\n")),Object(l.b)("h4",{id:"data"},"data"),Object(l.b)("p",null,"Contiene la data entrante de la petici\xf3n en formato binario."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),'\n# Valor actual de data\nreq.data: b\'{\\r\\n    "filename":"name of the file"\\r\\n}\'\n\n')),Object(l.b)("h4",{id:"environ"},"environ"),Object(l.b)("p",null,"Entorno WSGI utilizado para extraer la informaci\xf3n de la petici\xf3n."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# Valor actual de environ\nreq.environ: {'CONTENT_LENGTH': '39', 'CONTENT_TYPE': 'text/plain', 'HTTP_ACCEPT': '*/*', 'HTTP_ACCEPT_ENCODING': 'gzip, deflate, br', 'HTTP_CACHE_CONTROL': 'no-cache', 'HTTP_CONNECTION': 'keep-alive', 'HTTP_COOKIE': 'example1=123456', 'HTTP_HOST': 'localhost:1801', 'HTTP_USER_AGENT': 'PostmanRuntime/7.26.1', 'PATH_INFO': '/files/123', 'QUERY_STRING': 'queryparam=13344', 'RAW_URI': '/files/123?queryparam=13344', 'REMOTE_ADDR': 'localhost', ...}\n\n")),Object(l.b)("h4",{id:"files"},"files"),Object(l.b)("p",null,"Lista todos los archivos de la petici\xf3n HTTP. Cada valor es una instancia de la clase ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"https://werkzeug.palletsprojects.com/en/1.0.x/datastructures/#werkzeug.datastructures.FileStorage"}),"FileStorage"),"."),Object(l.b)("p",null,"Cada elemento se comporta como un ",Object(l.b)("em",{parentName:"p"},"file object")," reconocido por ",Object(l.b)("strong",{parentName:"p"},"Python"),", con la diferencia de que tambi\xe9n tiene una funci\xf3n ",Object(l.b)("inlineCode",{parentName:"p"},"save()")," que puede almacenar el archivo en un sistema de archivos."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# Valor actual de files\nreq.files: ImmutableMultiDict([('files', <FileStorage: '200px-Flag_of_Spain.svg.png' ('image/png')>)])\n\n")),Object(l.b)("h4",{id:"form"},"form"),Object(l.b)("p",null,"Contiene todos los valores en un formulario de una petici\xf3n tipo: ",Object(l.b)("inlineCode",{parentName:"p"},"application/x-www-form-urlencoded"),"."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# Valor actual de form\nreq.form: ImmutableMultiDict([('size', '123456')])\n\n")),Object(l.b)("h4",{id:"full_path"},"full_path"),Object(l.b)("p",null,"URL completa de la petici\xf3n."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# Valor actual de full_path\nreq.full_path: '/files/123?queryparam=13344'\n\n")),Object(l.b)("h4",{id:"headers"},"headers"),Object(l.b)("p",null,"Lista de todas las cabeceras de la petici\xf3n."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# Valor actual de headers\nEnvironHeaders([('Cookie', 'cookie1=123456'), ('User-Agent', 'PostmanRuntime/7.26.1'), ('Accept', '*/*'), ('Cache-Control', 'no-cache'), ('Postman-Token', 'a0c82eb0-7864-472f-8991-5fce2c250554'), ('Host', 'localhost:1801'), ('Accept-Encoding', 'gzip, deflate, br'), ('Connection', 'keep-alive'), ('Content-Type', 'application/x-www-form-urlencoded'), ('Content-Length', '11')])\n\n")),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\nsource = req.headers['source']\nsource = req.headers['Source']\n\n# http://localhost:1810/downloads/files/3db7ce17ced111eab61ae454e894d9d6\n# http://localhost:1810/downloads/files/3db7ce17ced111eab61ae454e894d9d6\n\n")),Object(l.b)("h4",{id:"host"},"host"),Object(l.b)("p",null,"Contiene el nombre del host y el puerto si este est\xe1 disponible."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# URL de la petici\xf3n HTTP\n# GET http://localhost:1801/files/123?queryparam=13344\n\n# Valor actual de host\nreq.host: 'localhost:1801'\n\n")),Object(l.b)("h4",{id:"method"},"method"),Object(l.b)("p",null,"El m\xe9todo de la petici\xf3n, por ejemplo: ",Object(l.b)("inlineCode",{parentName:"p"},"GET"),", ",Object(l.b)("inlineCode",{parentName:"p"},"POST"),", ",Object(l.b)("inlineCode",{parentName:"p"},"DELETE")," y ",Object(l.b)("inlineCode",{parentName:"p"},"PUT"),"."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# Valor actual de method\nreq.method: 'GET'\n\n")),Object(l.b)("h4",{id:"params"},"params"),Object(l.b)("p",null,"Objeto que contiene todos los parametros en la URL de petici\xf3n: ",Object(l.b)("inlineCode",{parentName:"p"},"GET"),", ",Object(l.b)("inlineCode",{parentName:"p"},"POST"),", ",Object(l.b)("inlineCode",{parentName:"p"},"DELETE")," y ",Object(l.b)("inlineCode",{parentName:"p"},"PUT"),"."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# URL de la petici\xf3n HTTP\n# GET http://localhost:1801/files/123?queryparam=13344\n\n# Valor actual de params\nreq.params: {'id': '123'}\n\n")),Object(l.b)("h4",{id:"path"},"path"),Object(l.b)("p",null,"Contiene la ruta de acceso en la URL de la petici\xf3n."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# URL de la petici\xf3n HTTP\n# GET http://localhost:1801/files/123?queryparam=13344\n\n# Valor actual de params\nreq.path: '/files/123'\n\n")),Object(l.b)("h4",{id:"retic"},"retic"),Object(l.b)("p",null,"Diccionario utilizado para agregar valores personalizados a la petici\xf3n y compartirlos entre controladores. Utiliza las funciones ",Object(l.b)("inlineCode",{parentName:"p"},"req.set()")," y ",Object(l.b)("inlineCode",{parentName:"p"},"req.get()")," para manipular sus valores."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# Asignar el objeto JSON con nombre app1\nreq.set('app1', {u\"msg\": \"say hi!\"})\n\n# Valor actual de retic\nreq.retic: {'app1': {'msg': 'say hi!'}}\n\n")),Object(l.b)("h3",{id:"funciones"},"Funciones"),Object(l.b)("p",null,"La clase Request utiliza las siguientes funciones para manipulaci\xf3n de su informaci\xf3n."),Object(l.b)("h4",{id:"paramkey-str-default_value-any--none-callback--none"},"param(",Object(l.b)("em",{parentName:"h4"},"key: str"),", ",Object(l.b)("em",{parentName:"h4"},"default_value: any")," = None, ",Object(l.b)("em",{parentName:"h4"},"callback")," = None)"),Object(l.b)("p",null,"Devuelve el valor del par\xe1metro con el nombre especificado."),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"req.param(...)")," busca en los par\xe1metros analizados desde la ",Object(l.b)("strong",{parentName:"p"},"ruta URL"),", el ",Object(l.b)("strong",{parentName:"p"},"cuerpo de la solicitud"),", la ",Object(l.b)("strong",{parentName:"p"},"cadena de consulta"),", en ese orden. Si no existe el valor en la solicitud, devuelve ",Object(l.b)("inlineCode",{parentName:"p"},"None")," o el valor predeterminado por defecto especificado."),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"Par\xe1metros:")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"key"),": Nombre del par\xe1metro a buscar.")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"default_value"),": Valor por defecto si el par\xe1metro no existe.")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"callback"),": Funci\xf3n que se ejecuta luego de obtener el valor del p\xe1rametro, puede ser ",Object(l.b)("inlineCode",{parentName:"p"},"bool"),", ",Object(l.b)("inlineCode",{parentName:"p"},"int"),", ",Object(l.b)("inlineCode",{parentName:"p"},"str"),", etc."))),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# URL de la petici\xf3n HTTP\n# GET http://localhost:1801/files/123?queryparam=13344\n\n# Imprimir el valor actual del par\xe1metro id, o utilizar un valor por defecto\nprint(req.param('id', 'default_value', int))\nprint(req.param('id3')\n\n# Salida: 123\n# Salida: None\n\n")),Object(l.b)("h4",{id:"setkey-str-value-any--none"},"set(",Object(l.b)("em",{parentName:"h4"},"key: str"),", ",Object(l.b)("em",{parentName:"h4"},"value: any")," = None)"),Object(l.b)("p",null,"Asigna un objeto en el ",Object(l.b)("strong",{parentName:"p"},"diccionario retic")," con un nombre espec\xedfico. Tenga en cuenta que los nombres no distinguen entre may\xfasculas y min\xfasculas y si ya existe se sobreescribir\xe1 su valor. Si el valor a asignar no existe, por defecto se guardar\xe1 con valor ",Object(l.b)("inlineCode",{parentName:"p"},"None"),"."),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"Par\xe1metros:")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"key"),": Nombre del objeto a guardar.")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"value"),": Valor con el que se guardar\xe1 el objeto."))),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),'\n# Asignar el objeto JSON con nombre app1\nreq.set(\'app1\', {u"msg": "say hi!"})\n\n')),Object(l.b)("h4",{id:"getkey-str-default_value-any--none"},"get(",Object(l.b)("em",{parentName:"h4"},"key: str"),", ",Object(l.b)("em",{parentName:"h4"},"default_value: any")," = None)"),Object(l.b)("p",null,"Retorna el valor de un objeto en el ",Object(l.b)("strong",{parentName:"p"},"diccionario retic")," con un nombre en especifico. Tenga en cuenta que los nombres no distinguen entre may\xfasculas y min\xfasculas. Si no existe el valor en la solicitud, devuelve ",Object(l.b)("inlineCode",{parentName:"p"},"None")," o el valor predeterminado por defecto especificado."),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"Par\xe1metros:")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"key"),": Nombre del objeto a buscar.")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"default_value"),": Valor por defecto si el objeto no existe."))),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# Asignar el objeto JSON con nombre app1\nreq.set('app1', {u\"msg\": \"say hi!\"})\n\n# Imprimir el valor actual de los par\xe1metros, o utilizar un valor por defecto\nprint(req.get('app1'))\nprint(req.get('app2', 2233))\n\n# Salida: {'msg': 'say hi!'}\n# Salida: 2233\n\n")),Object(l.b)("h4",{id:"all_params"},"all_params()"),Object(l.b)("p",null,"Devuelve el valor de todos los par\xe1metros enviados en la solicitud, y el diccionario retic combinado en un solo diccionario."),Object(l.b)("p",null,"Incluye par\xe1metros analizados desde la ",Object(l.b)("strong",{parentName:"p"},"ruta URL"),", el ",Object(l.b)("strong",{parentName:"p"},"cuerpo de la solicitud"),", la ",Object(l.b)("strong",{parentName:"p"},"cadena de consulta"),", y el ",Object(l.b)("strong",{parentName:"p"},"diccionario retic"),", en ese orden."),Object(l.b)("pre",null,Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-python"}),"\n# URL de la petici\xf3n HTTP\n# GET http://localhost:1801/files/123?queryparam=13344\n\n# Imprimir todos los par\xe1metros de la petici\xf3n\nprint(req.all_params())\n\n# Salida: {'id': '123', 'size': '123456', 'queryparam': '13344', 'app1': {'msg': 'say hi!'}}\n\n")),Object(l.b)("h3",{id:"otras-propiedades-y-funciones"},"Otras propiedades y funciones"),Object(l.b)("p",null,"Retic hereda de la clase ",Object(l.b)("inlineCode",{parentName:"p"},"Request de Werkzeug")," para la gesti\xf3n de sus peticiones, visita la documentaci\xf3n acerca de su clase ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"https://werkzeug.palletsprojects.com/en/1.0.x/wrappers/#base-wrappers"}),"Request")," para complementar la informaci\xf3n aqu\xed mencionada."))}s.isMDXComponent=!0},89:function(e,a,t){"use strict";t.d(a,"a",(function(){return b})),t.d(a,"b",(function(){return m}));var n=t(0),r=t.n(n);function l(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function c(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?c(Object(t),!0).forEach((function(a){l(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function p(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=r.a.createContext({}),s=function(e){var a=r.a.useContext(i),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},b=function(e){var a=s(e.components);return r.a.createElement(i.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return r.a.createElement(r.a.Fragment,{},a)}},d=r.a.forwardRef((function(e,a){var t=e.components,n=e.mdxType,l=e.originalType,c=e.parentName,i=p(e,["components","mdxType","originalType","parentName"]),b=s(t),d=n,m=b["".concat(c,".").concat(d)]||b[d]||u[d]||l;return t?r.a.createElement(m,o(o({ref:a},i),{},{components:t})):r.a.createElement(m,o({ref:a},i))}));function m(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var l=t.length,c=new Array(l);c[0]=d;var o={};for(var p in a)hasOwnProperty.call(a,p)&&(o[p]=a[p]);o.originalType=e,o.mdxType="string"==typeof e?e:n,c[1]=o;for(var i=2;i<l;i++)c[i]=t[i];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);