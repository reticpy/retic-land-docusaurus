(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{61:function(e,n,a){"use strict";a.r(n),a.d(n,"frontMatter",(function(){return i})),a.d(n,"metadata",(function(){return c})),a.d(n,"rightToc",(function(){return l})),a.d(n,"default",(function(){return s}));var t=a(2),r=a(6),o=(a(0),a(89)),i={id:"settings",title:"Configuraci\xf3n",sidebar_label:"Configuraci\xf3n",description:"Configuraci\xf3n de la aplicaci\xf3n",slug:"/concepts/settings"},c={unversionedId:"concepts/settings",id:"concepts/settings",isDocsHomePage:!1,title:"Configuraci\xf3n",description:"Configuraci\xf3n de la aplicaci\xf3n",source:"@site/docs\\es\\concepts\\settings.md",slug:"/concepts/settings",permalink:"/manual/concepts/settings",editUrl:"https://github.com/reticpy/retic-land-docusaurus/edit/master/docs/concepts/settings.md",version:"current",sidebar_label:"Configuraci\xf3n",sidebar:"docs",previous:{title:"Servicios",permalink:"/manual/concepts/services"},next:{title:"Archivo principal",permalink:"/manual/concepts/app"}},l=[{value:"Clase Config",id:"clase-config",children:[{value:"Funciones",id:"funciones",children:[]}]},{value:"Variables de entorno",id:"variables-de-entorno",children:[{value:"Funciones de la clase Env",id:"funciones-de-la-clase-env",children:[]}]}],p={rightToc:l};function s(e){var n=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(t.a)({},p,a,{components:n,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"clase-config"},"Clase Config"),Object(o.b)("p",null,"La clase ",Object(o.b)("strong",{parentName:"p"},"Config")," permite establecer valores en la aplicaci\xf3n para ser utilizados en las diferentes secciones de la misma."),Object(o.b)("h3",{id:"funciones"},"Funciones"),Object(o.b)("p",null,"La clase ",Object(o.b)("strong",{parentName:"p"},"Config")," utiliza las siguientes funciones para manipulaci\xf3n de su informaci\xf3n."),Object(o.b)("h4",{id:"setkey-str-value-dict"},"set(",Object(o.b)("em",{parentName:"h4"},"key: str"),", ",Object(o.b)("em",{parentName:"h4"},"value: dict"),")"),Object(o.b)("p",null,"Retic permite definir los valores de configuraci\xf3n de la aplicaci\xf3n de forma dinamica."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Par\xe1metros:")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"key"),": Nombre de la variable a asignar.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"value"),": Valor a asignar."))),Object(o.b)("pre",null,Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-python"}),'\n# settings.py\n\n# Retic\nfrom retic import App as app\n\n"""Asignar ruta de variables de entorno"""\napp.env.read_env(\'.env.development\', override=True)\n\n"""Asignar variables de configuracion"""\napp.config.set("default_port", 1801)\n\n')),Object(o.b)("h4",{id:"getkey-str-default_value-dict--none-callback-any--none"},"get(",Object(o.b)("em",{parentName:"h4"},"key: str"),", ",Object(o.b)("em",{parentName:"h4"},"default_value: dict")," = None, ",Object(o.b)("em",{parentName:"h4"},"callback: any")," = None)"),Object(o.b)("p",null,"Las variables de configuraci\xf3n se pueden utilizar en cualquier parte de la aplicaci\xf3n utilizando la instancia ",Object(o.b)("inlineCode",{parentName:"p"},"app"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Par\xe1metros:")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"key"),": Nombre de la variable a buscar.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"default_value"),": Valor por defecto si la variable no existe.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"callback"),": Funci\xf3n que se ejecuta luego de obtener el valor."))),Object(o.b)("pre",null,Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-python"}),'\n# app.py\n\n"""Main app"""\n\n# Retic\nfrom retic import App as app\n\n# Settings\nimport settings\n\n# Apps\nfrom apps import urls\n\n# Routes\nfrom routes import router\n\n# Agregar las rutas a la aplicaci\xf3n\napp.use(router)\n\nif __name__ == "__main__":\n    # Create web server\n    app.listen(\n        # Obtener la variable de entorno APP_HOSTNAME en el formato por defecto (str)\n        hostname=app.env("APP_HOSTNAME"),\n        # Obtener la variable de entorno APP_PORT en formato n\xfamerico. De no existir, retorna 1801.\n        port=app.env.int("APP_PORT", app.config.get("default_port"))\n    )\n\n')),Object(o.b)("h4",{id:"from_objectsettings-dict"},"from_object(",Object(o.b)("em",{parentName:"h4"},"settings: dict"),")"),Object(o.b)("p",null,"Establece la configuraci\xf3n basado en un diccionario."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Par\xe1metros:")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"settings"),": Objeto de tipo diccionario que contiene la configuraci\xf3n.")),Object(o.b)("pre",null,Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-python"}),'\n# settings.py\n\n# Retic\nfrom retic import App as app\n\n"""Asignar ruta de variables de entorno"""\napp.env.read_env(\'.env.development\', override=True)\n\n"""Crear diccionario de congfiguraci\xf3n"""\nconfig = {\n    u"default_port": 1801\n}\n\n"""Configuraci\xf3n basada en un objeto"""\napp.config.from_object(config)\n\n')),Object(o.b)("h4",{id:"clear"},"clear()"),Object(o.b)("p",null,"Borra todas las variables de configuraci\xf3n, sin embargo, las variables de entorno no son eliminadas."),Object(o.b)("pre",null,Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-python"}),'\n# settings.py\n\n# Retic\nfrom retic import App as app\n\n"""Asignar ruta de variables de entorno"""\napp.env.read_env(\'.env.development\', override=True)\n\n"""Crear diccionario de congfiguraci\xf3n"""\nconfig = {\n    u"default_port": 1801\n}\n\n"""Configuraci\xf3n basada en un objeto"""\napp.config.from_object(config)\n\n"""Eliminar variables de configuracion"""\napp.config.clear()\n\n')),Object(o.b)("h2",{id:"variables-de-entorno"},"Variables de entorno"),Object(o.b)("p",null,"Retic proporciona f\xe1cil acceso a las variables del sistema. Se utiliza la clase ",Object(o.b)("inlineCode",{parentName:"p"},"Env")," de la biblioteca ",Object(o.b)("inlineCode",{parentName:"p"},"environs")," para definir sus rutas en la aplicaci\xf3n. Consulte la ",Object(o.b)("a",Object(t.a)({parentName:"p"},{href:"https://github.com/sloria/environs"}),"documentaci\xf3n oficial")," para conocer todas las posibles combinaciones y c\xf3mo acceder a las variables de entorno de la mejor forma."),Object(o.b)("h3",{id:"funciones-de-la-clase-env"},"Funciones de la clase Env"),Object(o.b)("h4",{id:"envreadenvpath-str--none-_recurse-bool--true-verbose-bool--false-override-bool"},"env.read",Object(o.b)("em",{parentName:"h4"},"env(",Object(o.b)("em",{parentName:"em"},"path: str")," = None, _recurse: bool")," = True, ",Object(o.b)("em",{parentName:"h4"},"verbose: bool")," = False, ",Object(o.b)("em",{parentName:"h4"},"override: bool"),")"),Object(o.b)("p",null,"Por defecto se buscan variables en el archivo ",Object(o.b)("inlineCode",{parentName:"p"},".env")," si este existe. Sin embargo, en algunas ocaciones es necesario tener m\xe1s de un archivo de entorno. Esta funci\xf3n permite leer tantos archivos de entorno como se le indique."),Object(o.b)("pre",null,Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-bash"}),"\n# .env.development\n\n#App\nAPP_HOSTNAME                    =localhost\nAPP_PORT                        =1801\nAPP_ENV                         =development\n\n")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Par\xe1metros:")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"path"),": Directorio donde se encuentra el archivo de enterno.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"recurse"),": Realiza una busqueda de forma recursiva desde la raiz.")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"verbose"),": Define si se deben mostar las advertencias cuando un archivo no existe. El valor predeterminado es ",Object(o.b)("inlineCode",{parentName:"p"},"False"),".")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("strong",{parentName:"p"},"override"),": Sobreescribe las variables actuales en el sistema operativo. El valor predeterminado es ",Object(o.b)("inlineCode",{parentName:"p"},"False"),"."))),Object(o.b)("pre",null,Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-python"}),'\n# settings.py\n\n# Retic\nfrom retic import App as app\n\n"""Asignar ruta de variables de entorno"""\napp.env.read_env(\'.env.development\', override=True)\n\n')),Object(o.b)("h5",{id:"tipos-soportados"},"Tipos soportados"),Object(o.b)("p",null,"Por defecto Retic retorna el valor en formato ",Object(o.b)("inlineCode",{parentName:"p"},"str"),", sin embargo, se permite realizar el casteo automatico de las variables de entorno a un tipo especifico. A continuaci\xf3n se presenta los posibles formatos de salida al consultar una variable de entorno:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"env.str"),Object(o.b)("li",{parentName:"ul"},"env.bool"),Object(o.b)("li",{parentName:"ul"},"env.int"),Object(o.b)("li",{parentName:"ul"},"env.float"),Object(o.b)("li",{parentName:"ul"},"env.decimal"),Object(o.b)("li",{parentName:"ul"},"env.list (accepts optional subcast keyword argument)"),Object(o.b)("li",{parentName:"ul"},"env.dict (accepts optional subcast keyword argument)"),Object(o.b)("li",{parentName:"ul"},"env.json"),Object(o.b)("li",{parentName:"ul"},"env.datetime"),Object(o.b)("li",{parentName:"ul"},"env.date"),Object(o.b)("li",{parentName:"ul"},"env.timedelta (assumes value is an integer in seconds)"),Object(o.b)("li",{parentName:"ul"},"env.url"),Object(o.b)("li",{parentName:"ul"},"env.uuid"),Object(o.b)("li",{parentName:"ul"},"env.log_level"),Object(o.b)("li",{parentName:"ul"},"env.path (casts to a pathlib.Path)")),Object(o.b)("h5",{id:"uso-b\xe1sico"},"Uso b\xe1sico"),Object(o.b)("p",null,"La busqueda de una variable de entorno se realiza por su nombre, de no existir, se puede asignar un valor por defecto, caso contrario devolver\xe1 una excepci\xf3n que indica que la variable no existe en el sistema."),Object(o.b)("pre",null,Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-bash"}),"\n# .env.development\n\n#App\nAPP_HOSTNAME                    =localhost\nAPP_PORT                        =1801\nAPP_ENV                         =development\n\n")),Object(o.b)("pre",null,Object(o.b)("code",Object(t.a)({parentName:"pre"},{className:"language-python"}),'\n# app.py\n\n"""Main app"""\n\n# Retic\nfrom retic import App as app\n\n# Settings\nimport settings\n\n# Apps\nfrom apps import urls\n\n# Routes\nfrom routes import router\n\n# Agregar las rutas a la aplicaci\xf3n\napp.use(router)\n\nif __name__ == "__main__":\n    # Create web server\n    app.listen(\n        # Obtener la variable de entorno APP_HOSTNAME en el formato por defecto (str)\n        hostname=app.env("APP_HOSTNAME"),\n        # Obtener la variable de entorno APP_PORT en formato n\xfamerico. De no existir, retorna 1801.\n        port=app.env.int("APP_PORT", 1801),\n    )\n\n')))}s.isMDXComponent=!0},89:function(e,n,a){"use strict";a.d(n,"a",(function(){return b})),a.d(n,"b",(function(){return d}));var t=a(0),r=a.n(t);function o(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function c(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){o(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function l(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},o=Object.keys(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)a=o[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=r.a.createContext({}),s=function(e){var n=r.a.useContext(p),a=n;return e&&(a="function"==typeof e?e(n):c(c({},n),e)),a},b=function(e){var n=s(e.components);return r.a.createElement(p.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},m=r.a.forwardRef((function(e,n){var a=e.components,t=e.mdxType,o=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),b=s(a),m=t,d=b["".concat(i,".").concat(m)]||b[m]||u[m]||o;return a?r.a.createElement(d,c(c({ref:n},p),{},{components:a})):r.a.createElement(d,c({ref:n},p))}));function d(e,n){var a=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var o=a.length,i=new Array(o);i[0]=m;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c.mdxType="string"==typeof e?e:t,i[1]=c;for(var p=2;p<o;p++)i[p]=a[p];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"}}]);